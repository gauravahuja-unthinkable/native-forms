var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard"),_interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _toConsumableArray2=_interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray")),_slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray")),_react=_interopRequireWildcard(require("react")),_reactNative=require("react-native"),_theme=require("../theme"),_icons=require("../assets/icons"),_QuestionHeader=_interopRequireDefault(require("../components/QuestionHeader")),_utils=require("../utils"),_FadeInView=_interopRequireDefault(require("../components/FadeInView")),MultiSelection=function(a){var b=a.form,c=a.block,d=a.isPreview,e=a.currentPageIndex,f=a.blockIndex,g=a.allBlocks,h=a.onFormValueChange,i=b||{},j=i.backgroundColor,k=void 0===j?_theme.colors.white:j,l=i.color,m=void 0===l?_theme.colors.main:l,n=i.textColor,o=void 0===n?_theme.colors.primary:n,p=c.answers,q=c.other,r=void 0===q?{}:q,s=(0,_utils.lightOrDark)(k),t=c.value?Array.isArray(c.value)?c.value.filter(function(b){return 0>p.map(function(a){return a.value}).indexOf(b)})[0]:"":"",u=(0,_react.useState)(t||!1),v=(0,_slicedToArray2.default)(u,2),w=v[0],x=v[1],y=(0,_react.useState)(t),z=(0,_slicedToArray2.default)(y,2),A=z[0],B=z[1],C=(0,_react.useState)(c.value||[]),D=(0,_slicedToArray2.default)(C,2),E=D[0],F=D[1],G=function(b){return function(){d||(E.includes(b)?E=E.filter(function(c){return c!==b}):E.push(b),c.value=E,h&&h(c),F((0,_toConsumableArray2.default)(E)))}},H=function(a){var b=E.indexOf(A);-1===b?E.push(a):E[b]=a,c.value=E,h&&h(c),B(a)},I={borderColor:w?m+"80":"dark"===s?_theme.colors.darkgrey:_theme.colors.border,borderWidth:1,borderStyle:"solid",backgroundColor:w?m+"10":k},J={backgroundColor:w?m:k,borderColor:w?"transparent":"dark"===s?_theme.colors.white:_theme.colors.lightgrey,borderWidth:1,borderStyle:"solid"},K={fontWeight:w?"500":"400",color:w?m:o,fontSize:15},L={color:o,borderColor:"dark"===s?_theme.colors.darkgrey:_theme.colors.buttonBorder,backgroundColor:k};return _react.default.createElement(_FadeInView.default,null,_react.default.createElement(_QuestionHeader.default,{form:b,block:c,currentPageIndex:e,blockIndex:f,allBlocks:g}),_react.default.createElement(_reactNative.View,{style:styles.answersContainer},p.map(function(a,b){var c=a.value,d=E.includes(c),e={borderColor:d?m+"80":"dark"===s?_theme.colors.darkgrey:_theme.colors.border,borderWidth:1,borderStyle:"solid",backgroundColor:d?m+"10":k},f={backgroundColor:d?m:k,borderColor:d?"transparent":"dark"===s?_theme.colors.white:_theme.colors.lightgrey,borderWidth:1,borderStyle:"solid"},g={fontWeight:d?"500":"400",color:d?m:o,fontSize:15};return _react.default.createElement(_reactNative.TouchableOpacity,{key:c+b,onPress:G(c),activeOpacity:.5,style:[styles.answer,e]},_react.default.createElement(_reactNative.View,{style:[styles.box,f]},d&&_react.default.createElement(_icons.CheckIcon,{size:12,color:_theme.colors.white})),_react.default.createElement(_reactNative.Text,{style:g},c))}),r.label&&_react.default.createElement(_react.Fragment,null,_react.default.createElement(_reactNative.TouchableOpacity,{onPress:function onPress(){d||(w&&H(""),x(!w))},activeOpacity:.5,style:[styles.answer,I]},_react.default.createElement(_reactNative.View,{style:[styles.box,J]},w&&_react.default.createElement(_icons.CheckIcon,{size:12,color:_theme.colors.white})),_react.default.createElement(_reactNative.Text,{style:K},r.label)),w&&_react.default.createElement(_reactNative.TextInput,{editable:!d,maxLength:500,style:[L,styles.input],onChangeText:H,value:A,placeholder:r.placeholder||"Enter here..."}))))},styles=_reactNative.StyleSheet.create({answersContainer:{display:"flex",flexDirection:"column",width:"100%",backgroundColor:"transparent",maxWidth:_theme.MAX_FORM_WIDTH,paddingVertical:24,paddingHorizontal:22},answer:{display:"flex",flexDirection:"row",width:"100%",alignItems:"center",padding:16,borderRadius:6,marginBottom:20},box:{display:"flex",alignItems:"center",justifyContent:"center",width:16,height:16,borderRadius:2,marginRight:16},input:{borderWidth:1,borderStyle:"solid",borderRadius:6,fontSize:15,minHeight:46,maxHeight:46,padding:16,width:"100%"}}),_default=(0,_react.memo)(MultiSelection);exports.default=_default;