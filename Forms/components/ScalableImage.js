var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard"),_interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends")),_slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray")),_react=_interopRequireWildcard(require("react")),_reactNative=require("react-native"),ScalableImage=function(a){var b=a.background?_reactNative.ImageBackground:_reactNative.Image,c=(0,_react.useState)(null),d=(0,_slicedToArray2.default)(c,2),e=d[0],f=d[1],g=(0,_react.useState)(null),h=(0,_slicedToArray2.default)(g,2),i=h[0],j=h[1],k=(0,_react.useState)(_react.default.createElement(b,null)),l=(0,_slicedToArray2.default)(k,2),m=l[0],n=l[1],o=(0,_react.useRef)(!1);(0,_react.useEffect)(function(){return o.current=!0,function(){o.current=!1}},[]),(0,_react.useEffect)(function(){p(a)}),(0,_react.useEffect)(function(){n(_react.default.createElement(b,(0,_extends2.default)({},a,{style:[a.style,{width:e,height:i}]})))},[a,i,e]);var p=function(b){var c=b.source,d=c.uri?c.uri:c;_reactNative.Image.getSize(d,function(b,c){return q(b,c,a)},console.err)},q=function(b,c,d){var e=d.width,g=d.height,h=1;if(e&&g?h=Math.min(e/b,g/c):e?h=e/b:g&&(h=g/c),o.current){var i=b*h,k=c*h;f(i),j(k),a.onSize({width:i,height:k})}};return a.onPress?_react.default.createElement(_reactNative.TouchableOpacity,{onPress:a.onPress},m):m};ScalableImage.defaultProps={background:!1,onSize:function onSize(){}};var _default=ScalableImage;exports.default=_default;