var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard"),_interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray")),_react=_interopRequireWildcard(require("react")),_reactNative=require("react-native"),_KeyboardAwareScrollView=_interopRequireDefault(require("../components/KeyboardAwareScrollView")),_helpers=require("../blocks/helpers"),_PoweredBy=_interopRequireDefault(require("./PoweredBy")),_theme=require("../theme"),_Footer=_interopRequireDefault(require("./Footer")),_utils=require("../utils"),_Logo=_interopRequireDefault(require("./Logo")),_useCondition2=require("../hooks/use-condition"),FormContainer=function(a){var b=a.onFormSubmit,c=a.form,d=a.isSending,e=a.setSendingError,f=a.isPreview,g=a.iframe,h=a.showSelectionDialog,i=(0,_react.useState)(0),j=(0,_slicedToArray2.default)(i,2),k=j[0],l=j[1],m=c||{},n=m.pages,o=m.color,p=m.poweredBy,q=m.backgroundColor,r=m.button,s=m.submitButton,t=m.logo,u=(0,_useCondition2.useCondition)(c),v=u.conditions,w=u.onFormValueChange,x=0,y=n[x],z=(0,_helpers.returnQuestionsCount)(n),A={backgroundColor:o?o+"03":_theme.colors.main+"03"};return _react.default.createElement(_KeyboardAwareScrollView.default,{style:[{backgroundColor:q||"#ffffff"},styles.container,{paddingBottom:k}],extraScrollHeight:120,enableResetScrollToCoords:!1,enableOnAndroid:!0,bounces:!1},_react.default.createElement(_reactNative.View,{style:[A,styles.blocksContainer]},t&&_react.default.createElement(_Logo.default,{logo:t,form:c}),0>=z&&_react.default.createElement(_reactNative.View,{style:styles.emptyContainer},_react.default.createElement(_reactNative.Text,{style:styles.emptyText},"This form is empty.")),(0,_helpers.renderBlocks)({page:y,form:c,isPreview:f,onFocus:function onInputFocus(){"web"===_reactNative.Platform.OS&&"Android"===(0,_utils.getOperatingSystem)()&&g&&l(275),"web"===_reactNative.Platform.OS&&"Android"===(0,_utils.getOperatingSystem)()&&window.ReactNativeWebView&&l(275)},onBlur:function onInputBlur(){return 0<k&&l(0)},currentPageIndex:x,showSelectionDialog:h,conditions:v,onFormValueChange:w}),_react.default.createElement(_Footer.default,{page:y,sendForm:function sendForm(){if(!d){var a=!0,f=!1;return n.forEach(function(b){var d=(0,_helpers.returnPageCompletionStatus)(b,c),e=d.isCompleted,g=d.hasValues;!f&&g&&(f=!0),e||(a=!1)}),a&&f?void b():void e("Fill up all required fields.")}},setSendingError:e,color:o,isSending:d,isPreview:f,button:r,submitButton:s,form:c})),"hide"!==p&&_react.default.createElement(_PoweredBy.default,{form:c}))},styles=_reactNative.StyleSheet.create({container:{display:"flex",flexDirection:"column",flex:1,width:"100%"},emptyContainer:{display:"flex",flexDirection:"column",alignItems:"center",paddingTop:32,paddingBottom:24},blocksContainer:{display:"flex",flexDirection:"column",flex:1},emptyText:{fontSize:16,color:_theme.colors.primary}}),_default=(0,_react.memo)(FormContainer);exports.default=_default;