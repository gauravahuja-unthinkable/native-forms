var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard"),_interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends")),_slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray")),_objectWithoutProperties2=_interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties")),_react=_interopRequireWildcard(require("react")),_reactNative=require("react-native"),_LoadingError=require("./LoadingError"),_index=_interopRequireDefault(require("../index")),_theme=require("../theme"),_statusBarHeight=require("../utils/status-bar-height"),_Header=_interopRequireDefault(require("./Header")),_ProgressBar=_interopRequireDefault(require("./ProgressBar")),_Dimensions$get=_reactNative.Dimensions.get("window"),width=_Dimensions$get.width,height=_Dimensions$get.height,HEADER_HEIGHT=49,MobileContainer=function(a){var b=a.error,c=a.form,d=a.onClose,e=a.onSend,f=a.onBeforeSend,g=a.livePreview,h=a.iframe,i=a.noInternetConnection,j=a.showSelectionDialog,k=a.forceMobile,l=(0,_objectWithoutProperties2.default)(a,["error","form","onClose","onSend","onBeforeSend","livePreview","iframe","noInternetConnection","showSelectionDialog","forceMobile"]),m=(0,_react.useState)(!1),n=(0,_slicedToArray2.default)(m,2),o=n[0],p=n[1],q=(0,_react.useMemo)(function(){return new _reactNative.Animated.Value(0)},[]),r=(0,_react.useMemo)(function(){return new _reactNative.Animated.Value(height)},[]),s=(0,_react.useMemo)(function(){return new _reactNative.Animated.Value(0)},[]),t=(0,_statusBarHeight.getStatusBarHeight)();(0,_react.useEffect)(function(){_reactNative.Animated.parallel([_reactNative.Animated.timing(q,{toValue:1,duration:500,easing:_reactNative.Easing.out(_reactNative.Easing.quad),useNativeDriver:!0}),_reactNative.Animated.timing(r,{toValue:0,duration:500,easing:_reactNative.Easing.out(_reactNative.Easing.quad),useNativeDriver:!0})]).start()},[q,r]),(0,_react.useEffect)(function(){c&&_reactNative.Animated.timing(s,{toValue:1,duration:700,easing:_reactNative.Easing.out(_reactNative.Easing.quad),useNativeDriver:!0}).start()},[s,c]);var u=function(){q.setValue(1),r.setValue(0),_reactNative.Animated.parallel([_reactNative.Animated.timing(q,{toValue:0,duration:500,easing:_reactNative.Easing.linear(),useNativeDriver:!0}),_reactNative.Animated.timing(r,{toValue:height,duration:500,easing:_reactNative.Easing.linear(),useNativeDriver:!0})]).start(function(){d()})},v={height:height-HEADER_HEIGHT-t};return _react.default.createElement(_reactNative.Animated.View,{style:[{position:k?"absolute":"web"===_reactNative.Platform.OS?"fixed":"absolute",opacity:q,transform:[{translateY:r}],backgroundColor:c?c.backgroundColor||_theme.colors.white:_theme.colors.white},styles.overlay]},_react.default.createElement(_Header.default,{form:c,onClose:u,style:{marginTop:t}}),o&&_react.default.createElement(_ProgressBar.default,{form:c}),b&&_react.default.createElement(_reactNative.View,{style:[v,styles.container]},_react.default.createElement(_LoadingError.LoadingError,{iframe:!0,error:b})),!b&&!c&&_react.default.createElement(_reactNative.View,{style:[v,styles.container]},_react.default.createElement(_reactNative.ActivityIndicator,{size:"small",color:_theme.colors.primary})),!b&&c&&_react.default.createElement(_reactNative.Animated.View,{style:[v,styles.container,{opacity:s}]},_react.default.createElement(_index.default,(0,_extends2.default)({onSend:function _onFormSend(){p(!0),e&&e(),setTimeout(function(){u()},2e3)},onBeforeSend:f,form:c,livePreview:g,iframe:h,noInternetConnection:i,showSelectionDialog:j},l))))},styles=_reactNative.StyleSheet.create({overlay:{overflow:"scroll",height:height,width:width,top:0,left:0,right:0,bottom:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start",zIndex:9e5,elevation:9},container:{alignItems:"center",justifyContent:"center",width:"100%"}});MobileContainer.defaultProps={onClose:function onClose(){}};var _default=(0,_react.memo)(MobileContainer);exports.default=_default;