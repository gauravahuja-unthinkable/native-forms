var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.sendCompletedForm=exports.hasOpenedForm=exports.getSenderLocation=void 0;var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator")),_config=require("../config"),_utils=require("../utils"),key="r0yPEUfm0BLQED02MQOGXqG1DW",getSenderLocation=function(){return new Promise(function(a){setTimeout(function(){a("")},5e3),fetch(_config.config.LOCATION_API_URL).then(function(b){var c;return _regenerator.default.async(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,_regenerator.default.awrap(b.json());case 2:c=d.sent,a(c);case 4:case"end":return d.stop();}})}).catch(function(){return a("")})})};exports.getSenderLocation=getSenderLocation;var hasOpenedForm=function(a){var b,c,d,e;return _regenerator.default.async(function(f){for(;;)switch(f.prev=f.next){case 0:return b=a.l,c=a.id,d=a.f,f.next=3,_regenerator.default.awrap(fetch(_config.config.SERVER_URL+"/form-inbox/opened",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({license:(0,_utils.protectWithKey)(b,key),formName:d,formId:c})}));case 3:return e=f.sent,f.next=6,_regenerator.default.awrap(e.json());case 6:return f.abrupt("return",f.sent);case 7:case"end":return f.stop();}})};exports.hasOpenedForm=hasOpenedForm;var sendCompletedForm=function(a){return fetch(_config.config.SERVER_URL+"/form-inbox/completed",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({license:(0,_utils.protectWithKey)(a.license,key),formData:a})})};exports.sendCompletedForm=sendCompletedForm;